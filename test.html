<html>
	<!--include j-copy library-->
	<script src="https://cdn.rawgit.com/Triforcey/clip-j/b3a3bbb777394de40a1e221511b29d768dba5743/clip-j.js" ></script>
	<head>
		<title>Test</title>
	</head>
	<body>
		<button onclick="clip()">Click Here</button>
		<button onclick="clipImage('https://s-media-cache-ak0.pinimg.com/736x/a1/e3/6b/a1e36bcb8ce179bd8cc8db28ff4ef6fb.jpg')">Clip Image</button>
	</body>
	<script>
		var text;
		var input;
		var finished;

		function copy() {
			input = prompt('What phrase do you want to copy?');
			var error;
			try {
				clip(input);
			} catch (e) {
				document.write('There was an error: ' + '<p style="color: red; display: inline-block; margin: 0px;">' + e + '</p>');
				if (e == 'ReferenceError: clip is not defined') {
					document.write('<p style="color: red;">It appears this page cannot reach the clip-j source. Chances are, you are either offline, or this is an error on our part. If you suspect this error is on are part, please report this error with the source code of this page (ctrl u), if you can obtain it. There is also a chance this is an old link. In this case check the README.md of clip-j for the latest link.</p>');
					document.write('<a href="view-source:' + document.location.href + '" target="_blank">Source Code</a>');
				} else {
					document.write('<p style="color: red;">Please report this error, with the pages source code (ctrl u), if you can obtain it.</p>');
					document.write('<a href="view-source:' + document.location.href + '" target="_blank">Source Code</a>');
				}
				error = e;
			} finally {
				if (typeof error === 'undefined') {
					document.write('The copy worked! Of course by that, we mean no errors were reported, so you may attempt a paste in the textbox below. <br>');
					text = document.createElement('input');
					text.setAttribute('type', 'text');
					text.setAttribute('onpaste', 'paste()');
					text = document.body.appendChild(text);
					text.focus();
					finished = true;
					document.write('<br> You may now paste.');
				}
			}
		}

		function paste() {
			setTimeout(paste2, 500);
		}

		function paste2() {
			if (text.value == input) {
				var temp = text.value;
				text.remove();
				document.write('<br> <br>' + temp);
				alert('It worked!');
			} else {
				var temp = text.value;
				text.remove();
				document.write('<br> <br>' + temp);
				alert('It failed.');
			}
		}
	</script>
</html>
